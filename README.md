# alumni-vote
Голосование выпускников - краткая спека

Веб-приложение для голосований выпускников на выборах в Совет и при осуществлении прямой демократии. Принципы работы:

- голосовать только кодами выпускников
- можно выбирать несколько кандидатов на одной странице
- можно голосовать повторно, тогда новый выбор полностью заменяет старый
- результаты голосования показываются сразу, в т.ч. до голосования

## Схема данных

### poll
- id
- priority - для сортировки
- open_until - время окончания приема голосов
- public - показывается всем при заходе в голосовалку
- title
- description - html
- min_votes
- max_votes
- binary - за, против, не проголосовал vs за, не голосовал 

### poll_option

- id
- poll_id
- priority - для сортировки
- open_until - время окончания приема голосов за эту опцию
- title
- description - html

### poll_vote
- id
- poll_id
- alumni_id
- time - время голосования
- alumni_code - временный код
- active - активен только у последнего варианта ответа на данное голосование

### poll_vote_option
- poll_option_id
- poll_vote_id
- vote - true для голосов за, false - против

### alumni
- id
- name = закешированное полное имя

## Архитектура
- веб-приложение alumni-vote на Django
- поддерживает доменные куки в alumni57.ru с кодом выпускника
- при голосовании обращается к сервису авторизации, получает временный код, сохраняет в таблицу

## Интерфейс
- корневая страница содержит список всех активных public голосований, разделенных чертой
- каждое голосование содержит тайтл, дескрипшн и список вариантов с одной или двумя взаимноисключающими галками
- выпускнику, который уже голосовал, показываются его старые галки. Если какая-то опция заэкспайрилась, то галка показывается, но при переголосовании галку нужно будет снять
- под кнопкой голосования - текущие результаты с абсолютами за и против, отсортированные по убыванию за.
- есть специальная страница с параметром, показывающая не public голосования, например, "выдвижение в кандидаты в Совет".
